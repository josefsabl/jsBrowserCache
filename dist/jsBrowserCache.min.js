"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),JsBrowserCache=function(){function a(b){_classCallCheck(this,a),this._options=_extends({},{prefix:"cache-",storage:"local"},b||{}),this._seconds=1e3,this._setStorage(),this.testSupportsStorage()}return _createClass(a,[{key:"testSupportsStorage",value:function(){var a="j8EiBTWwQV";if(void 0!==this._supportsStorage)return this._supportsStorage;if(!this._storage)return this._supportsStorage=!1;try{this._setItem(a,"j8EiBTWwQV"),this._removeItem(a),this._supportsStorage=!0}catch(a){this._IsExceptionOutOfSpace(a)&&this._storage.length?this._supportsStorage=!0:this._supportsStorage=!1}return this._supportsStorage}},{key:"isSupportsStorage",value:function(){return this._supportsStorage,this._supportsStorage}},{key:"setItem",value:function(a,b,c){var d=void 0,e=(new Date).getTime();if(!this.isSupportsStorage())return!1;d={value:this._jsonToString(b),create:e,expire:c?e+1*c*this._seconds:""};try{return this._removeItem(a),this._setItem(a,this._jsonToString(d)),!0}catch(b){return!(!this._IsExceptionOutOfSpace(b)||!this._storage.length)&&(this.clearExpirate(),this._setItem(a,this._jsonToString(d)),!!this._getItem(a))}}},{key:"getItem",value:function(a){var b=void 0;return this.isSupportsStorage()&&(b=this._getItem(a))?(b=this._stringToJson(b),b.expire&&(new Date).getTime()>b.expire?(this._removeItem(a),null):this._stringToJson(b.value)):null}},{key:"clearExpired",value:function(){var a=this,b=void 0;if(!this.isSupportsStorage())return null;if(this._storage.length>0&&(b=Object.keys(this._storage).filter(function(b){return 0===b.indexOf(a._options.prefix)}),b.length>0))for(var c=0,d=b.length;c<d;c++){var e=b[c].replace(this._options.prefix,""),f=this._stringToJson(this._getItem(e));f.expire&&(new Date).getTime()>f.expire&&this._removeItem(e)}}},{key:"_setStorage",value:function(a){try{this._storage="session"!==a?localStorage:sessionStorage}catch(a){this._storage=!1}}},{key:"_setItem",value:function(a,b){this._storage.setItem(this._options.prefix+a,b)}},{key:"_getItem",value:function(a){return this._storage.getItem(this._options.prefix+a)}},{key:"_removeItem",value:function(a){this._storage.removeItem(this._options.prefix+a)}},{key:"_jsonToString",value:function(a){return JSON.stringify(a)}},{key:"_stringToJson",value:function(a){return JSON.parse(a)}},{key:"_IsExceptionOutOfSpace",value:function(a){return a&&"QUOTA_EXCEEDED_ERR"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name||"QuotaExceededError"===a.name}}]),a}();
//# sourceMappingURL=jsBrowserCache.min.js.map